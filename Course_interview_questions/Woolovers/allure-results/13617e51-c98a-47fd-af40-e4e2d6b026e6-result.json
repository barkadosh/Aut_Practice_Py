{"name": "TC 01 - Change currency", "status": "failed", "statusDetails": {"message": "Failed", "trace": "self = <Woolovers.test_woolovers.TestWooLoversWeb object at 0x0000016C959FA250>\n\n    @allure.title(\"TC 01 - Change currency\")\n    @allure.description(\"Change the currency of the prices US Dollar\")\n    def test_change_currency(self):\n        try:\n            self.step_close_popups()\n>           self.step_change_currency()\n\ntest_woolovers.py:40: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\na = (<Woolovers.test_woolovers.TestWooLoversWeb object at 0x0000016C959FA250>,), kw = {}, __tracebackhide__ = True, params = OrderedDict()\nargs = ['<Woolovers.test_woolovers.TestWooLoversWeb object at 0x0000016C959FA250>']\n\n    @wraps(func)\n    def impl(*a, **kw):\n        __tracebackhide__ = True\n        params = func_parameters(func, *a, **kw)\n        args = list(map(lambda x: represent(x), a))\n        with StepContext(self.title.format(*args, **params), params):\n>           return func(*a, **kw)\n\n..\\..\\..\\..\\AppData\\Roaming\\Python\\Python311\\site-packages\\allure_commons\\_allure.py:192: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <Woolovers.test_woolovers.TestWooLoversWeb object at 0x0000016C959FA250>\n\n    @allure.step(\"Change the currency to US Dollar\")\n    def step_change_currency(self):\n        eyes.open(driver, \"Change currency\", \"Change currency on page to US Dollar\")\n        driver.find_element(By.XPATH, \"//a[@class='font-weight-bold']\").click()\n        eyes.check_window(\"Before changing the currency\")\n        driver.find_element(By.XPATH, \"//img[@src='//gepi.global-e.com/content/images/flags/il.png']\").click()\n        WebDriverWait(driver, 10).until(\n            EC.visibility_of_element_located((By.CLASS_NAME, \"glPopupContent\")))\n        currency = Select(driver.find_element(By.ID, \"gle_selectedCurrency\"))\n        currency.select_by_visible_text(\"US Dollar\")\n        driver.find_element(By.XPATH, \"//input[@data-key='SavenClose']\").click()\n        eyes.check_window(\"After changing the currency\")\n>       eyes.close()\n\ntest_woolovers.py:63: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <applitools.selenium.eyes.Eyes object at 0x0000016C927C1650>, raise_ex = True\n\n    def close(self, raise_ex=True):\n        # type: (bool) -> Optional[TestResults]\n        \"\"\"\n        Ends the test.\n    \n        :param raise_ex: If true, an exception will be raised for failed/new tests.\n        :return: The test results.\n        \"\"\"\n>       return self._close(raise_ex, True)\n\n..\\..\\..\\..\\AppData\\Roaming\\Python\\Python311\\site-packages\\applitools\\selenium\\eyes.py:200: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <applitools.selenium.eyes.Eyes object at 0x0000016C927C1650>, raise_ex = True, wait_result = True\n\n    def _close(self, raise_ex, wait_result):\n        # type: (bool, bool) -> Optional[TestResults]\n        if self.configure.is_disabled:\n            return None\n        if not self.is_open:\n            raise EyesError(\"Eyes not open\")\n>       results = self._commands.eyes_close_eyes(\n            self._eyes_ref,\n            {\"throwErr\": raise_ex},\n            self._marshaled_configuration(),\n            wait_result,\n        )\n\n..\\..\\..\\..\\AppData\\Roaming\\Python\\Python311\\site-packages\\applitools\\selenium\\eyes.py:520: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <applitools.selenium.command_executor.CommandExecutor object at 0x0000016C9546AC90>, eyes = {'applitools-ref-id': '1fa5f693-0c2c-4c66-9b95-59d5fc95f25c'}\nsettings = {'throwErr': True}\nconfig = {'check': {}, 'close': {}, 'open': {'apiKey': 'rCfg7VUAMD1y9jG97L8H101bVw0yaF0RQuC2ZWo0q47pCs110', 'appName': 'Change ...9c0cf0d9', 'startedAt': '2023-01-17T08:51:56Z'}, 'testName': 'Change currency on page to US Dollar'}, 'screenshot': {}}\nwait_result = True\n\n    def eyes_close_eyes(self, eyes, settings, config, wait_result):\n        # type: (dict, dict, dict, bool) -> List[dict]\n        payload = {\"eyes\": eyes, \"settings\": settings, \"config\": config}\n>       return self._checked_command(\"Eyes.close\", payload, wait_result)\n\n..\\..\\..\\..\\AppData\\Roaming\\Python\\Python311\\site-packages\\applitools\\selenium\\command_executor.py:143: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <applitools.selenium.command_executor.CommandExecutor object at 0x0000016C9546AC90>, name = 'Eyes.close'\npayload = {'config': {'check': {}, 'close': {}, 'open': {'apiKey': 'rCfg7VUAMD1y9jG97L8H101bVw0yaF0RQuC2ZWo0q47pCs110', 'appName...creenshot': {}}, 'eyes': {'applitools-ref-id': '1fa5f693-0c2c-4c66-9b95-59d5fc95f25c'}, 'settings': {'throwErr': True}}\nwait_result = True, wait_timeout = 540\n\n    def _checked_command(self, name, payload, wait_result=True, wait_timeout=9 * 60):\n        # type: (Text, dict, bool, float) -> Optional[Any]\n        response = self._connection.command(name, payload, wait_result, wait_timeout)\n        if wait_result:\n            response_payload = response[\"payload\"]\n>           _check_error(response_payload)\n\n..\\..\\..\\..\\AppData\\Roaming\\Python\\Python311\\site-packages\\applitools\\selenium\\command_executor.py:158: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\npayload = {'error': {'info': {'result': {'apiUrls': {'batch': 'https://eyesapi.applitools.com/api/sessions/batches/0000025172835... C:\\\\snapshot\\\\eyes-universal\\\\dist\\\\universal-server.js\\n    at async C:\\\\snapshot\\\\eyes-universal\\\\dist\\\\socket.js\"}}\n\n    def _check_error(payload):\n        # type: (dict) -> None\n        error = payload.get(\"error\")\n        if error:\n            usdk_error = demarshal_error(error)\n            logger.error(\"Re-raising an error received from SDK server: %r\", usdk_error)\n>           raise usdk_error\nE           applitools.common.errors.DiffsFoundError: Test 'Change currency on page to US Dollar' of 'Change currency' detected differences! See details at: https://eyes.applitools.com/app/batches/00000251728355266610/00000251728355266469?accountId=uC7pT3e6R0qz0R2dpXaRFA~~\n\n..\\..\\..\\..\\AppData\\Roaming\\Python\\Python311\\site-packages\\applitools\\selenium\\command_executor.py:170: DiffsFoundError\n\nDuring handling of the above exception, another exception occurred:\n\nself = <Woolovers.test_woolovers.TestWooLoversWeb object at 0x0000016C959FA250>\n\n    @allure.title(\"TC 01 - Change currency\")\n    @allure.description(\"Change the currency of the prices US Dollar\")\n    def test_change_currency(self):\n        try:\n            self.step_close_popups()\n            self.step_change_currency()\n        except Exception as error:\n            print(error)\n>           pytest.fail()\nE           Failed\n\ntest_woolovers.py:43: Failed"}, "description": "Change the currency of the prices US Dollar", "steps": [{"name": "Approve and close 2 popups", "status": "passed", "start": 1673945523492, "stop": 1673945524075}, {"name": "Change the currency to US Dollar", "status": "broken", "statusDetails": {"message": "applitools.common.errors.DiffsFoundError: Test 'Change currency on page to US Dollar' of 'Change currency' detected differences! See details at: https://eyes.applitools.com/app/batches/00000251728355266610/00000251728355266469?accountId=uC7pT3e6R0qz0R2dpXaRFA~~\n", "trace": "  File \"C:\\Users\\barka\\AppData\\Roaming\\Python\\Python311\\site-packages\\allure_commons\\_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"C:\\Users\\barka\\PycharmProjects\\Aut_Practice_Py\\Course_interview_questions\\Woolovers\\test_woolovers.py\", line 63, in step_change_currency\n    eyes.close()\n  File \"C:\\Users\\barka\\AppData\\Roaming\\Python\\Python311\\site-packages\\applitools\\selenium\\eyes.py\", line 200, in close\n    return self._close(raise_ex, True)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\barka\\AppData\\Roaming\\Python\\Python311\\site-packages\\applitools\\selenium\\eyes.py\", line 520, in _close\n    results = self._commands.eyes_close_eyes(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\barka\\AppData\\Roaming\\Python\\Python311\\site-packages\\applitools\\selenium\\command_executor.py\", line 143, in eyes_close_eyes\n    return self._checked_command(\"Eyes.close\", payload, wait_result)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\barka\\AppData\\Roaming\\Python\\Python311\\site-packages\\applitools\\selenium\\command_executor.py\", line 158, in _checked_command\n    _check_error(response_payload)\n  File \"C:\\Users\\barka\\AppData\\Roaming\\Python\\Python311\\site-packages\\applitools\\selenium\\command_executor.py\", line 170, in _check_error\n    raise usdk_error\n"}, "start": 1673945524075, "stop": 1673945605871}], "attachments": [{"name": "log", "source": "5c2ad053-27f5-4b5d-9fce-8402dd392493-attachment.txt", "type": "text/plain"}, {"name": "stdout", "source": "d7145f81-70cb-47de-bc1b-f736c4114d8f-attachment.txt", "type": "text/plain"}], "start": 1673945523492, "stop": 1673945605880, "uuid": "83e031d6-4913-4c47-bffc-3e6ec8509e3e", "historyId": "1723dfd6d4f8f4c1b567c2991be234f4", "testCaseId": "d42521bd866aa7800c02e105fb502744", "fullName": "test_woolovers.TestWooLoversWeb#test_change_currency", "labels": [{"name": "suite", "value": "test_woolovers"}, {"name": "subSuite", "value": "TestWooLoversWeb"}, {"name": "host", "value": "BarLaptop"}, {"name": "thread", "value": "20196-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_woolovers"}]}